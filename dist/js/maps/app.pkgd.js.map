{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.pkgd.js","src/js/app.js","src/js/modules/about.js","src/js/modules/css3.js","src/js/modules/router.js","src/js/modules/util.js","src/jsx/Components.jsx"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","About","Components","window","log","console","router","util","css3","phpScript","comp","index","ReactDOM","render","React","createElement","Index","json","document","getElementById","view","View","about","page","parseInt","load","opened","close","srl","open","ready","addRoute","goto","touch","jQuery","addClass","start","../jsx/Components.jsx","./modules/about.js","./modules/css3.js","./modules/router.js","./modules/util.js",2,"self","this","$this","$","url_page","isAnimate","setEvent","find","on","show","setTimeout","transitionEnd","removeClass","off","empty","hide","state","$indexItems","oneStop","location","hash",3,"CSS3","eventNames","WebkitTransition","MozTransition","OTransition","transition","isSupport","el","name","undefined","style","callback","one",4,"route","handler","routes","push","parts","split","stop","isStop","resume","isOneStop","path","substr","partsLength","params","j","apply","onhashchange",5,"Util","DocumentTouch",6,"comps","createClass","displayName","url","method","getInitialState","items","showMoreButton","componentDidMount","props","setState","get","replace","res","JSON","parse","update","result","next","refs","more","buttonControl","newItems","allItems","concat","IndexItems","IndexMore","ref","dir","item","k","IndexItem","key","map","onClick","children","href","ImageLoader","src","img","alt","title","class_button","moreData","sw","button","type","className","figure","Image","class_loading","class_image","class_error","findDOMNode","onload","onerror","styleImage","backgroundImage","scrollTop","parentClassName","slideSwitch","navDirection","prev","isAnimation","body","wrap","action","target","slider","keyboardEvent","swipeEvent","kill","$items","swipeWrap","help","cntItems","getElementsByTagName","move","currentTarget","getAttribute","navigationControl","obj","keyCode","openHelp","controller","data-dir","Slider","navControl","KeyboardHelp","classStr","total","data","getData","$item","initSwipe","checkNavigation","pos","getPos","param","$el","Swipe","startSlide","continuous","elem","css","imageLoad","childNodes","hasClass","changeUrl","$child","getItem","tmp","$img","parent","attr","data-srl","data-src"],"mappings":"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","file":"app.pkgd.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar About = require('./modules/about.js');\nvar Components = require('../jsx/Components.jsx');\n\nwindow.log = function (o) {\n\tconsole.log(o);\n};\nwindow.router = require('./modules/router.js');\nwindow.util = require('./modules/util.js');\nwindow.css3 = require('./modules/css3.js');\nwindow.phpScript = './libs/item.php';\n\n// set components\nwindow.comp = {\n\tindex: ReactDOM.render(React.createElement(Components.Index, {\n\t\tjson: './libs/item.php?page={page}'\n\t}), document.getElementById('itemIndex')),\n\tview: ReactDOM.render(React.createElement(Components.View, {\n\t\tjson: './libs/item.php?type=viewIndex'\n\t}), document.getElementById('popup')),\n\tabout: new About()\n};\n\n/**\r\n * Go to page\r\n */\nwindow.goto = {\n\tindex: function index(page) {\n\t\tpage = page ? parseInt(page) : 1;\n\n\t\tcomp.index.load(page);\n\n\t\tif (comp.view.opened) {\n\t\t\tcomp.view.close();\n\t\t}\n\t},\n\n\tview: function view(srl) {\n\t\tcomp.view.open(srl, comp.index.ready ? true : false);\n\t},\n\n\tabout: function about() {\n\t\tcomp.about.open(comp.index.ready ? true : false);\n\t}\n};\n\n/**\r\n * Route map\r\n */\nrouter.addRoute('', goto.index);\nrouter.addRoute('/', goto.index);\nrouter.addRoute('/page/:page', goto.index);\nrouter.addRoute('/view/:srl', goto.view);\nrouter.addRoute('/About', goto.about);\n\n/**\r\n * A C T I O N\r\n */\n\n// set touch mode\nif (util.touch()) {\n\tjQuery('html').addClass('mode-touch');\n}\n\n// start\nrouter.start();\n\n},{\"../jsx/Components.jsx\":6,\"./modules/about.js\":2,\"./modules/css3.js\":3,\"./modules/router.js\":4,\"./modules/util.js\":5}],2:[function(require,module,exports){\n'use strict';\n\nfunction About() {\n\tvar self = this;\n\tvar $this = $('#about');\n\tvar url_page = './pages/about.html';\n\n\tthis.opened = false;\n\n\t// open window\n\tthis.open = function (isAnimate) {\n\t\tfunction setEvent() {\n\t\t\t$this.find('[data-act=close]').on('click', function () {\n\t\t\t\tself.close();\n\t\t\t});\n\t\t}\n\n\t\tthis.opened = true;\n\n\t\t// act\n\t\tif (isAnimate) {\n\t\t\t$this.load(url_page, function () {\n\t\t\t\t$this.show();\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t$this.addClass('show');\n\t\t\t\t\tcss3.transitionEnd($this, function () {\n\t\t\t\t\t\t$('html').addClass('mode-popup');\n\t\t\t\t\t\tsetEvent();\n\t\t\t\t\t});\n\t\t\t\t}, 50);\n\t\t\t});\n\t\t} else {\n\t\t\t$('html').addClass('mode-popup');\n\t\t\t$this.show().addClass('show');\n\t\t\t$this.load(url_page, function () {\n\t\t\t\tsetEvent();\n\t\t\t});\n\t\t}\n\t};\n\n\t// close window\n\tthis.close = function () {\n\t\tthis.opened = false;\n\n\t\t$('html').removeClass('mode-popup');\n\t\t$this.removeClass('show');\n\t\t$this.find('[data-act=close]').off('click');\n\n\t\tcss3.transitionEnd($this, function () {\n\t\t\t$this.empty().hide();\n\t\t});\n\n\t\tif (comp.index) {\n\t\t\tvar page = comp.index.state.page;\n\t\t\tvar $indexItems = $('#itemIndex ul li');\n\t\t\tif ($indexItems.length) {\n\t\t\t\trouter.oneStop();\n\t\t\t}\n\t\t\tlocation.hash = page > 1 ? '#/page/' + page : '#/';\n\t\t}\n\t};\n}\n\nmodule.exports = About;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\n/**\r\n * CSS3 class\r\n */\nfunction CSS3() {\n\n\tthis.eventNames = {\n\t\tWebkitTransition: 'webkitTransitionEnd',\n\t\tMozTransition: 'transitionend',\n\t\tOTransition: 'oTransitionEnd otransitionend',\n\t\ttransition: 'transitionend'\n\t};\n\n\tthis.isSupport = function () {\n\t\tvar el = document.createElement('div');\n\t\tfor (var name in this.eventNames) {\n\t\t\tif (el.style[name] !== undefined) {\n\t\t\t\treturn this.eventNames[name];\n\t\t\t}\n\t\t}\n\t\tel = null;\n\t\treturn false;\n\t};\n\n\tthis.transitionEnd = function (el, callback) {\n\t\tif (this.isSupport()) {\n\t\t\tif (callback) {\n\t\t\t\t$(el).one(this.isSupport(), callback);\n\t\t\t}\n\t\t}\n\t};\n}\n\nmodule.exports = new CSS3();\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar router = function router() {\n\tvar routes = [];\n\tvar isStop = false;\n\tvar isOneStop = false;\n\n\tfunction addRoute(route, handler) {\n\t\troutes.push({ parts: route.split('/'), handler: handler });\n\t}\n\n\tfunction load(route) {\n\t\twindow.location.hash = route;\n\t}\n\n\tfunction stop() {\n\t\tisStop = true;\n\t}\n\n\tfunction resume() {\n\t\tisStop = false;\n\t}\n\n\tfunction oneStop() {\n\t\tisStop = true;\n\t\tisOneStop = true;\n\t}\n\n\tfunction start() {\n\t\tif (isStop) {\n\t\t\tif (isOneStop) {\n\t\t\t\tisOneStop = false;\n\t\t\t\tisStop = false;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tvar path = window.location.hash.substr(1),\n\t\t    parts = path.split('/'),\n\t\t    partsLength = parts.length;\n\n\t\tfor (var i = 0; i < routes.length; i++) {\n\t\t\tvar route = routes[i];\n\t\t\tif (route.parts.length === partsLength) {\n\t\t\t\tvar params = [];\n\t\t\t\tfor (var j = 0; j < partsLength; j++) {\n\t\t\t\t\tif (route.parts[j].substr(0, 1) === ':') {\n\t\t\t\t\t\tparams.push(parts[j]);\n\t\t\t\t\t} else if (route.parts[j] !== parts[j]) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (j === partsLength) {\n\t\t\t\t\troute.handler.apply(undefined, params);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\twindow.onhashchange = start;\n\n\treturn {\n\t\taddRoute: addRoute,\n\t\tload: load,\n\t\tstart: start,\n\t\tstop: stop,\n\t\tresume: resume,\n\t\toneStop: oneStop\n\t};\n};\n\nmodule.exports = router();\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\n/**\r\n * Util class\r\n */\nfunction Util() {\n\tthis.touch = function () {\n\t\treturn 'ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch;\n\t};\n}\n\nmodule.exports = new Util();\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar comps = {};\n\n/**\r\n * Component - index\r\n */\ncomps.Index = React.createClass({\n\tdisplayName: 'Index',\n\n\t/**\r\n  * goose api address\r\n  * @param string url\r\n  */\n\turl: null,\n\n\t/**\r\n  * 추가되는 방식\r\n  * @param string method (overwrite, add)\r\n  */\n\tmethod: 'overwrite',\n\n\t/**\r\n  * 목록이 로드되어있는지 확인값\r\n  * @param Boolean\r\n  */\n\tready: false,\n\n\t/**\r\n  * init state\r\n  * @return object\r\n  */\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\titems: [],\n\t\t\tpage: 1,\n\t\t\tshowMoreButton: true\n\t\t};\n\t},\n\n\t/**\r\n  * component did mount\r\n  * 컴포넌트가 준비가 완료되었을때 실행되는 메서드\r\n  *\r\n  * @return void\r\n  */\n\tcomponentDidMount: function componentDidMount() {\n\t\tthis.url = this.props.json;\n\t},\n\n\t/**\r\n  * load data\r\n  * goose api에서 데이터를 로드하는 메서드\r\n  *\r\n  * @param n 페이지 번호값\r\n  */\n\tload: function load(n) {\n\t\tvar self = this;\n\t\tthis.ready = true;\n\t\tn = parseInt(n);\n\n\t\t// update page\n\t\tthis.setState({ page: parseInt(n) });\n\n\t\t// load data\n\t\t$.get(this.url.replace('{page}', n ? n : 1), function (res) {\n\t\t\tres = JSON.parse(res);\n\t\t\tvar result = self.update(res.result);\n\t\t\tself.method = 'overwrite';\n\n\t\t\t// 다음 데이터가 없으면 더보기 버튼 숨기기\n\t\t\tif (!res.next) {\n\t\t\t\tself.setState({ showMoreButton: false });\n\t\t\t}\n\t\t\t// 돌아가는 more 버튼 멈추기\n\t\t\tself.refs.more.buttonControl(false);\n\t\t});\n\t},\n\n\t// update items\n\tupdate: function update(newItems) {\n\t\tif (!newItems.length) {\n\t\t\treturn false;\n\t\t}\n\t\tvar allItems = this.method == 'add' ? this.state.items.concat(newItems) : newItems;\n\t\tthis.setState({ items: allItems });\n\t\treturn true;\n\t},\n\n\t// render\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\tReact.createElement(IndexItems, { items: this.state.items }),\n\t\t\tReact.createElement(IndexMore, { ref: 'more', show: this.state.showMoreButton, dir: 'next' })\n\t\t);\n\t}\n});\n\n/**\r\n * Component - index items\r\n */\nvar IndexItems = React.createClass({\n\tdisplayName: 'IndexItems',\n\n\trender: function render() {\n\t\tvar items = function items(item, k) {\n\t\t\treturn React.createElement(\n\t\t\t\tIndexItem,\n\t\t\t\t{ key: k },\n\t\t\t\titem\n\t\t\t);\n\t\t};\n\t\treturn React.createElement(\n\t\t\t'ul',\n\t\t\t{ ref: 'list' },\n\t\t\tthis.props.items.map(items)\n\t\t);\n\t}\n});\n\n/**\r\n * Component - index item\r\n */\nvar IndexItem = React.createClass({\n\tdisplayName: 'IndexItem',\n\n\tonClick: function onClick(e) {\n\t\treturn comp.view.opened ? false : true;\n\t},\n\trender: function render() {\n\t\tvar item = this.props.children;\n\t\treturn React.createElement(\n\t\t\t'li',\n\t\t\t{ key: 'item-' + item.srl },\n\t\t\tReact.createElement(\n\t\t\t\t'a',\n\t\t\t\t{ href: '#/view/' + item.srl, onClick: this.onClick },\n\t\t\t\tReact.createElement(ImageLoader, { src: item.img, alt: item.title })\n\t\t\t)\n\t\t);\n\t}\n});\n\n/**\r\n * Component - index more data\r\n */\nvar IndexMore = React.createClass({\n\tdisplayName: 'IndexMore',\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tclass_button: ''\n\t\t};\n\t},\n\tmoreData: function moreData(e) {\n\t\tthis.buttonControl(true);\n\t\tcomp.index.method = 'add';\n\t\tlocation.hash = '/page/' + (this.props.dir == 'prev' ? comp.index.state.page - 1 : comp.index.state.page + 1);\n\t},\n\tbuttonControl: function buttonControl(sw) {\n\t\tif (sw) {\n\t\t\tthis.setState({ class_button: 'rotate' });\n\t\t} else {\n\t\t\tthis.setState({ class_button: '' });\n\t\t}\n\t},\n\trender: function render() {\n\t\tvar button = null;\n\t\tif (this.props.show) {\n\t\t\tbutton = React.createElement(\n\t\t\t\t'button',\n\t\t\t\t{ type: 'button', className: this.state.class_button, title: 'more load images', key: 'more', onClick: this.moreData },\n\t\t\t\tReact.createElement('i', null)\n\t\t\t);\n\t\t}\n\t\treturn React.createElement(\n\t\t\t'nav',\n\t\t\t{ className: 'more-data' },\n\t\t\tbutton\n\t\t);\n\t}\n});\n\n/**\r\n * Image loader\r\n */\nvar ImageLoader = React.createClass({\n\tdisplayName: 'ImageLoader',\n\n\tfigure: null,\n\timg: new Image(),\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tclass_loading: 'loading',\n\t\t\tclass_image: 'image',\n\t\t\tclass_error: 'error'\n\t\t};\n\t},\n\n\tcomponentDidMount: function componentDidMount() {\n\t\tvar self = this;\n\t\tvar img = new Image();\n\t\t// set figure\n\t\tthis.figure = ReactDOM.findDOMNode(this.refs.figure);\n\n\t\t// set image event\n\t\timg.onload = function () {\n\t\t\timg = null;\n\t\t\tsetTimeout(function () {\n\t\t\t\tself.setState({\n\t\t\t\t\tclass_loading: '',\n\t\t\t\t\tclass_image: 'image show'\n\t\t\t\t});\n\t\t\t}, 50);\n\t\t};\n\t\timg.onerror = function () {\n\t\t\timg = null;\n\t\t\tself.setState({\n\t\t\t\tclass_loading: '',\n\t\t\t\tclass_error: 'error show'\n\t\t\t});\n\t\t};\n\n\t\t// set image source\n\t\timg.src = this.props.src;\n\t},\n\n\trender: function render() {\n\t\tvar dom = null;\n\t\tvar styleImage = {\n\t\t\tbackgroundImage: this.props.src ? 'url(' + this.props.src + ')' : ''\n\t\t};\n\t\treturn React.createElement(\n\t\t\t'figure',\n\t\t\t{ ref: 'figure', title: this.props.title },\n\t\t\tReact.createElement('span', { ref: 'image', className: this.state.class_image, style: styleImage }),\n\t\t\tReact.createElement('span', { ref: 'error', className: this.state.class_error }),\n\t\t\tReact.createElement('span', { ref: 'loading', className: this.state.class_loading })\n\t\t);\n\t}\n\n});\n\n/**\r\n * Component - View\r\n */\ncomps.View = React.createClass({\n\tdisplayName: 'View',\n\n\topened: false,\n\tscrollTop: 0,\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tparentClassName: '',\n\t\t\tsrl: null,\n\t\t\tslideSwitch: false,\n\t\t\tnavDirection: { prev: '', next: '' }\n\t\t};\n\t},\n\n\t// component did mount\n\tcomponentDidMount: function componentDidMount() {},\n\n\t// open view\n\topen: function open(srl, isAnimation) {\n\t\tvar self = this;\n\t\tthis.opened = true;\n\t\tthis.scrollTop = document.body.scrollTop;\n\t\tif (isAnimation) {\n\t\t\tthis.setState({ parentClassName: 'show' }, function () {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tself.setState({ parentClassName: 'show animate' });\n\t\t\t\t}, 30);\n\t\t\t});\n\t\t\tcss3.transitionEnd(ReactDOM.findDOMNode(this.refs.wrap), function (e) {\n\t\t\t\tself.action(e.target, srl);\n\t\t\t});\n\t\t} else {\n\t\t\tself.setState({ parentClassName: 'show animate' });\n\t\t\tself.action(ReactDOM.findDOMNode(this.refs.wrap), srl);\n\t\t}\n\n\t\t// add 'mode-popup' class name\n\t\t$('html').addClass('mode-popup');\n\t},\n\n\taction: function action(o, srl) {\n\t\tthis.setState({ srl: srl });\n\t\tthis.refs.slider.open();\n\t\tthis.keyboardEvent(true);\n\t},\n\n\t// close view\n\tclose: function close() {\n\t\tvar self = this;\n\n\t\tthis.opened = false;\n\t\tthis.setState({ parentClassName: 'show' });\n\n\t\tthis.keyboardEvent(false);\n\n\t\t// 닫기 애니메이션이 끝난 후\n\t\tcss3.transitionEnd(ReactDOM.findDOMNode(this.refs.wrap), function (e) {\n\t\t\tif (self.refs.slider.swipeEvent) {\n\t\t\t\tself.refs.slider.swipeEvent.kill();\n\t\t\t\tself.refs.slider.swipeEvent = null;\n\t\t\t}\n\t\t\tself.setState({ parentClassName: '' });\n\t\t\tvar $items = $(ReactDOM.findDOMNode(self.refs.slider.refs.swipeWrap));\n\t\t\t$items.find('.show').removeClass('show');\n\n\t\t\t// close help\n\t\t\tif (self.refs.help.opened) {\n\t\t\t\tself.refs.help.close();\n\t\t\t}\n\n\t\t\t// restore scroll top\n\t\t\tdocument.body.scrollTop = self.scrollTop;\n\t\t});\n\n\t\tif (comp.index) {\n\t\t\tvar page = comp.index.state.page;\n\t\t\tvar cntItems = ReactDOM.findDOMNode(comp.index).getElementsByTagName('UL')[0].children.length;\n\t\t\tif (cntItems) {\n\t\t\t\trouter.oneStop(); // 주소가 변할때 목록이 불러와버리는 현상이 생겨서 한번만 실행되게 실행\n\t\t\t}\n\t\t\tlocation.hash = page > 1 ? '#/page/' + page : '#/';\n\t\t}\n\n\t\t// remove 'mode-popup' class name\n\t\t$('html').removeClass('mode-popup');\n\t},\n\n\t// move item\n\tmove: function move(e) {\n\t\tswitch (e.currentTarget.getAttribute('data-dir')) {\n\t\t\tcase 'prev':\n\t\t\t\tthis.refs.slider.prev();\n\t\t\t\tbreak;\n\t\t\tcase 'next':\n\t\t\t\tthis.refs.slider.next();\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t// 네비게이션 컨트롤 버튼 on/off 제어\n\tnavigationControl: function navigationControl(obj) {\n\t\tthis.setState({\n\t\t\tnavDirection: {\n\t\t\t\tprev: obj.prev ? 'show' : '',\n\t\t\t\tnext: obj.next ? 'show' : ''\n\t\t\t}\n\t\t});\n\t},\n\n\t// 키보드 이벤트\n\tkeyboardEvent: function keyboardEvent(sw) {\n\t\tvar self = this;\n\t\tif (sw) {\n\t\t\t$(window).on('keyup.view', function (e) {\n\t\t\t\tif (e.keyCode == 37) {\n\t\t\t\t\t// left\n\t\t\t\t\tself.refs.slider.next();\n\t\t\t\t} else if (e.keyCode == 39) {\n\t\t\t\t\t// right\n\t\t\t\t\tself.refs.slider.prev();\n\t\t\t\t} else if (e.keyCode == 27) {\n\t\t\t\t\t// esc\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$(window).off('keyup.view');\n\t\t}\n\t},\n\n\t// open help\n\topenHelp: function openHelp() {\n\t\tif (this.refs.help.opened) {\n\t\t\tthis.refs.help.close();\n\t\t} else {\n\t\t\tthis.refs.help.open();\n\t\t}\n\t},\n\n\t// render\n\trender: function render() {\n\t\tvar controller;\n\t\tif (!util.touch()) {\n\t\t\tcontroller = React.createElement(\n\t\t\t\t'nav',\n\t\t\t\t{ className: 'control-direction' },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', onClick: this.move, 'data-dir': 'next', title: 'next image', className: 'prev' + ' ' + this.state.navDirection.next },\n\t\t\t\t\tReact.createElement('i', { className: 'sp-ico ico-arrow-left' })\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', onClick: this.move, 'data-dir': 'prev', title: 'prev image', className: 'next' + ' ' + this.state.navDirection.prev },\n\t\t\t\t\tReact.createElement('i', { className: 'sp-ico ico-arrow-right' })\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn React.createElement(\n\t\t\t'article',\n\t\t\t{ ref: 'wrap', className: 'pop-view ' + this.state.parentClassName },\n\t\t\tReact.createElement(Slider, { ref: 'slider', srl: this.state.srl, json: this.props.json, navControl: this.navigationControl }),\n\t\t\tReact.createElement(\n\t\t\t\t'nav',\n\t\t\t\t{ className: 'control-top' },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', ref: 'help', title: 'help', onClick: this.openHelp },\n\t\t\t\t\tReact.createElement('i', { className: 'sp-ico ico-help' })\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', onClick: this.close, ref: 'close', title: 'close' },\n\t\t\t\t\tReact.createElement('i', { className: 'btn-close' })\n\t\t\t\t)\n\t\t\t),\n\t\t\tcontroller,\n\t\t\tReact.createElement(KeyboardHelp, { ref: 'help' })\n\t\t);\n\t}\n});\n\n/**\r\n * Keyboard help\r\n */\nvar KeyboardHelp = React.createClass({\n\tdisplayName: 'KeyboardHelp',\n\n\topened: false,\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tclassStr: ''\n\t\t};\n\t},\n\n\topen: function open() {\n\t\tvar self = this;\n\t\tthis.opened = true;\n\t\t$(ReactDOM.findDOMNode(this)).show();\n\t\tsetTimeout(function () {\n\t\t\tself.setState({ classStr: 'show' });\n\t\t}, 30);\n\t},\n\n\tclose: function close() {\n\t\tvar self = this;\n\t\tthis.opened = false;\n\t\tthis.setState({ classStr: '' });\n\t\tsetTimeout(function () {\n\t\t\t$(ReactDOM.findDOMNode(self)).hide();\n\t\t}, 280);\n\t},\n\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'section',\n\t\t\t{ className: 'help ' + this.state.classStr },\n\t\t\tReact.createElement(\n\t\t\t\t'h1',\n\t\t\t\tnull,\n\t\t\t\t'Keyboard guide'\n\t\t\t),\n\t\t\tReact.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'bd' },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'dl',\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'dt',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'ESC'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'dd',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t'Close view'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'dl',\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'dt',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'LEFT'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'dd',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t'Prev Slide'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'dl',\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'dt',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'RIGHT'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'dd',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t'Next Slide'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t),\n\t\t\tReact.createElement(\n\t\t\t\t'button',\n\t\t\t\t{ type: 'button', className: 'close', title: 'close', onClick: this.close },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'i',\n\t\t\t\t\tnull,\n\t\t\t\t\t'close'\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});\n\n/**\r\n * Slider\r\n */\nvar Slider = React.createClass({\n\tdisplayName: 'Slider',\n\n\tready: false,\n\tswipeEvent: null,\n\ttotal: 0,\n\n\tgetInitialState: function getInitialState() {\n\t\treturn { data: [] };\n\t},\n\n\tcomponentDidMount: function componentDidMount() {\n\t\tvar self = this;\n\t\t$.get(this.props.json, function (res) {\n\t\t\tvar getData = JSON.parse(res).result;\n\t\t\tself.total = getData.length;\n\t\t\tself.setState({ data: getData });\n\t\t\tself.ready = true;\n\n\t\t\tvar item = self.refs['item-' + self.props.srl];\n\t\t\tvar $item = $(ReactDOM.findDOMNode(item));\n\n\t\t\t// view가 열려져 있는 상태라면 swipe 초기화하기\n\t\t\tif (comp.view.opened) {\n\t\t\t\tself.initSwipe($item);\n\t\t\t}\n\t\t});\n\t},\n\n\tcheckNavigation: function checkNavigation() {\n\t\tvar pos = this.swipeEvent.getPos();\n\t\tvar param = { prev: true, next: true };\n\n\t\tif (pos == 0) {\n\t\t\tparam.prev = false;\n\t\t} else if (this.total - 1 <= pos) {\n\t\t\tparam.next = false;\n\t\t}\n\n\t\tthis.props.navControl(param);\n\t},\n\n\tinitSwipe: function initSwipe($el) {\n\t\tvar self = this;\n\t\tthis.swipeEvent = Swipe(ReactDOM.findDOMNode(this), {\n\t\t\tstartSlide: $el.index(),\n\t\t\tcontinuous: false,\n\t\t\tcallback: function callback(index, elem) {\n\t\t\t\tvar $item = $(elem).children('.img');\n\t\t\t\tif ($item.css('backgroundImage') == 'none') {\n\t\t\t\t\tself.imageLoad(elem.childNodes[0]);\n\t\t\t\t} else if (!$item.hasClass('show')) {\n\t\t\t\t\t$item.addClass('show');\n\t\t\t\t}\n\t\t\t\tself.changeUrl(parseInt(elem.getAttribute('data-srl')));\n\n\t\t\t\tself.checkNavigation();\n\t\t\t},\n\t\t\ttransitionEnd: function transitionEnd(index, elem) {}\n\t\t});\n\n\t\t// load image\n\t\tvar $child = $el.children('.img');\n\t\tif ($child.length) {\n\t\t\tthis.imageLoad($child.get(0));\n\t\t\tself.checkNavigation();\n\t\t}\n\t},\n\n\tgetItem: function getItem(srl) {\n\t\treturn this.refs['item-' + srl];\n\t},\n\n\timageLoad: function imageLoad(img) {\n\t\tvar src = img.getAttribute('data-src');\n\t\tvar tmp = new Image();\n\n\t\ttmp.onload = function () {\n\t\t\ttmp = null;\n\t\t\tvar $img = $(img);\n\t\t\tvar srl = parseInt($img.parent().attr('data-srl'));\n\t\t\t$img.parent().removeClass('loading');\n\t\t\t$img.css('background-image', 'url(\\'' + src + '\\')').removeClass('not-animation').addClass('show');\n\t\t\t$.get(phpScript + '?type=updateHit&srl=' + srl, function (res) {});\n\t\t};\n\n\t\ttmp.onerror = function () {\n\t\t\ttmp = null;\n\t\t};\n\n\t\ttmp.src = src;\n\t},\n\n\topen: function open() {\n\t\tif (this.ready) {\n\t\t\tvar item = this.getItem(this.props.srl);\n\t\t\tvar $el = $(ReactDOM.findDOMNode(item));\n\t\t\t$el.children().removeClass('show').addClass('not-animation');\n\t\t\tthis.initSwipe($el);\n\t\t}\n\t},\n\n\tprev: function prev() {\n\t\tthis.swipeEvent.prev();\n\t},\n\n\tnext: function next() {\n\t\tthis.swipeEvent.next();\n\t},\n\n\tchangeUrl: function changeUrl(srl) {\n\t\trouter.oneStop();\n\t\tlocation.hash = '/view/' + srl;\n\t},\n\n\trender: function render() {\n\t\tvar items = this.state.data.map(function (o, k) {\n\t\t\treturn React.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ ref: 'item-' + o.srl, 'data-srl': o.srl, key: 'srl-' + o.srl, className: 'loading' },\n\t\t\t\tReact.createElement('div', { 'data-src': o.img, title: o.title, className: 'img' }),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'span',\n\t\t\t\t\t{ className: 'log' },\n\t\t\t\t\t'index:' + k + ', srl:' + o.srl\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ ref: 'slider', className: 'swipe' },\n\t\t\tReact.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ ref: 'swipeWrap', className: 'swipe-wrap' },\n\t\t\t\titems\n\t\t\t)\n\t\t);\n\t}\n\n});\n\nmodule.exports = comps;\n\n},{}]},{},[1])\n\n","var About = require('./modules/about.js');\r\nvar Components = require('../jsx/Components.jsx');\r\n\r\nwindow.log = function(o) { console.log(o); };\r\nwindow.router = require('./modules/router.js');\r\nwindow.util = require('./modules/util.js');\r\nwindow.css3 = require('./modules/css3.js');\r\nwindow.phpScript = './libs/item.php';\r\n\r\n\r\n// set components\r\nwindow.comp = {\r\n\tindex : ReactDOM.render(\r\n\t\tReact.createElement(Components.Index, {\r\n\t\t\tjson: './libs/item.php?page={page}'\r\n\t\t}),\r\n\t\tdocument.getElementById('itemIndex')\r\n\t),\r\n\tview : ReactDOM.render(\r\n\t\tReact.createElement(Components.View, {\r\n\t\t\tjson: './libs/item.php?type=viewIndex'\r\n\t\t}),\r\n\t\tdocument.getElementById('popup')\r\n\t),\r\n\tabout : new About()\r\n};\r\n\r\n\r\n/**\r\n * Go to page\r\n */\r\nwindow.goto = {\r\n\tindex : function(page)\r\n\t{\r\n\t\tpage = (page) ? parseInt(page) : 1;\r\n\r\n\t\tcomp.index.load(page);\r\n\r\n\t\tif (comp.view.opened)\r\n\t\t{\r\n\t\t\tcomp.view.close();\r\n\t\t}\r\n\t},\r\n\r\n\tview : function(srl)\r\n\t{\r\n\t\tcomp.view.open(srl, ((comp.index.ready) ? true : false));\r\n\t},\r\n\r\n\tabout : function()\r\n\t{\r\n\t\tcomp.about.open(((comp.index.ready) ? true : false));\r\n\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * Route map\r\n */\r\nrouter.addRoute('', goto.index);\r\nrouter.addRoute('/', goto.index);\r\nrouter.addRoute('/page/:page', goto.index);\r\nrouter.addRoute('/view/:srl', goto.view);\r\nrouter.addRoute('/About', goto.about);\r\n\r\n\r\n/**\r\n * A C T I O N\r\n */\r\n\r\n// set touch mode\r\nif (util.touch())\r\n{\r\n\tjQuery('html').addClass('mode-touch');\r\n}\r\n\r\n// start\r\nrouter.start();\r\n","function About()\r\n{\r\n\tvar self = this;\r\n\tvar $this = $('#about');\r\n\tvar url_page = './pages/about.html';\r\n\r\n\tthis.opened = false;\r\n\r\n\t// open window\r\n\tthis.open = function(isAnimate)\r\n\t{\r\n\t\tfunction setEvent()\r\n\t\t{\r\n\t\t\t$this.find('[data-act=close]').on('click', function(){\r\n\t\t\t\tself.close();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.opened = true;\r\n\r\n\t\t// act\r\n\t\tif (isAnimate)\r\n\t\t{\r\n\t\t\t$this.load(url_page, function(){\r\n\t\t\t\t$this.show();\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t$this.addClass('show');\r\n\t\t\t\t\tcss3.transitionEnd($this, function(){\r\n\t\t\t\t\t\t$('html').addClass('mode-popup');\r\n\t\t\t\t\t\tsetEvent();\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 50);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('html').addClass('mode-popup');\r\n\t\t\t$this.show().addClass('show');\r\n\t\t\t$this.load(url_page, function(){\r\n\t\t\t\tsetEvent();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// close window\r\n\tthis.close = function()\r\n\t{\r\n\t\tthis.opened = false;\r\n\r\n\t\t$('html').removeClass('mode-popup');\r\n\t\t$this.removeClass('show');\r\n\t\t$this.find('[data-act=close]').off('click');\r\n\r\n\t\tcss3.transitionEnd($this, function(){\r\n\t\t\t$this.empty().hide();\r\n\t\t});\r\n\r\n\t\tif (comp.index)\r\n\t\t{\r\n\t\t\tvar page = comp.index.state.page;\r\n\t\t\tvar $indexItems = $('#itemIndex ul li');\r\n\t\t\tif ($indexItems.length)\r\n\t\t\t{\r\n\t\t\t\trouter.oneStop();\r\n\t\t\t}\r\n\t\t\tlocation.hash = (page > 1) ? '#/page/' + page : '#/';\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = About;","/**\r\n * CSS3 class\r\n */\r\nfunction CSS3() {\r\n\r\n\tthis.eventNames = {\r\n\t\tWebkitTransition : 'webkitTransitionEnd',\r\n\t\tMozTransition    : 'transitionend',\r\n\t\tOTransition      : 'oTransitionEnd otransitionend',\r\n\t\ttransition       : 'transitionend'\r\n\t};\r\n\r\n\tthis.isSupport = function()\r\n\t{\r\n\t\tvar el = document.createElement('div');\r\n\t\tfor (var name in this.eventNames) {\r\n\t\t\tif (el.style[name] !== undefined) {\r\n\t\t\t\treturn this.eventNames[name];\r\n\t\t\t}\r\n\t\t}\r\n\t\tel = null;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tthis.transitionEnd = function(el, callback)\r\n\t{\r\n\t\tif (this.isSupport())\r\n\t\t{\r\n\t\t\tif (callback)\r\n\t\t\t{\r\n\t\t\t\t$(el).one(this.isSupport(), callback);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = new CSS3();","var router = function()\r\n{\r\n\tvar routes = [];\r\n\tvar isStop = false;\r\n\tvar isOneStop = false;\r\n\r\n\tfunction addRoute(route, handler) {\r\n\t\troutes.push({parts: route.split('/'), handler: handler});\r\n\t}\r\n\r\n\tfunction load(route) {\r\n\t\twindow.location.hash = route;\r\n\t}\r\n\r\n\tfunction stop()\r\n\t{\r\n\t\tisStop = true;\r\n\t}\r\n\r\n\tfunction resume()\r\n\t{\r\n\t\tisStop = false;\r\n\t}\r\n\r\n\tfunction oneStop()\r\n\t{\r\n\t\tisStop = true;\r\n\t\tisOneStop = true;\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tif (isStop)\r\n\t\t{\r\n\t\t\tif (isOneStop)\r\n\t\t\t{\r\n\t\t\t\tisOneStop = false;\r\n\t\t\t\tisStop = false;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar path = window.location.hash.substr(1),\r\n\t\t\tparts = path.split('/'),\r\n\t\t\tpartsLength = parts.length;\r\n\r\n\t\tfor (var i = 0; i < routes.length; i++) {\r\n\t\t\tvar route = routes[i];\r\n\t\t\tif (route.parts.length === partsLength) {\r\n\t\t\t\tvar params = [];\r\n\t\t\t\tfor (var j = 0; j < partsLength; j++) {\r\n\t\t\t\t\tif (route.parts[j].substr(0, 1) === ':') {\r\n\t\t\t\t\t\tparams.push(parts[j]);\r\n\t\t\t\t\t} else if (route.parts[j] !== parts[j]) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (j === partsLength) {\r\n\t\t\t\t\troute.handler.apply(undefined, params);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\twindow.onhashchange = start;\r\n\r\n\treturn {\r\n\t\taddRoute : addRoute,\r\n\t\tload : load,\r\n\t\tstart : start,\r\n\t\tstop : stop,\r\n\t\tresume : resume,\r\n\t\toneStop : oneStop\r\n\t};\r\n};\r\n\r\nmodule.exports = router();","/**\r\n * Util class\r\n */\r\nfunction Util() {\r\n\tthis.touch = function()\r\n\t{\r\n\t\treturn (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\r\n\t};\r\n}\r\n\r\nmodule.exports = new Util();","var comps = {};\r\n\r\n/**\r\n * Component - index\r\n */\r\ncomps.Index = React.createClass({\r\n\r\n\t/**\r\n\t * goose api address\r\n\t * @param string url\r\n\t */\r\n\turl : null,\r\n\r\n\t/**\r\n\t * 추가되는 방식\r\n\t * @param string method (overwrite, add)\r\n\t */\r\n\tmethod : 'overwrite',\r\n\r\n\t/**\r\n\t * 목록이 로드되어있는지 확인값\r\n\t * @param Boolean\r\n\t */\r\n\tready : false,\r\n\r\n\t/**\r\n\t * init state\r\n\t * @return object\r\n\t */\r\n\tgetInitialState : function()\r\n\t{\r\n\t\treturn {\r\n\t\t\titems : [],\r\n\t\t\tpage : 1,\r\n\t\t\tshowMoreButton : true\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * component did mount\r\n\t * 컴포넌트가 준비가 완료되었을때 실행되는 메서드\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tcomponentDidMount : function()\r\n\t{\r\n\t\tthis.url = this.props.json;\r\n\t},\r\n\r\n\t/**\r\n\t * load data\r\n\t * goose api에서 데이터를 로드하는 메서드\r\n\t *\r\n\t * @param n 페이지 번호값\r\n\t */\r\n\tload : function(n)\r\n\t{\r\n\t\tvar self = this;\r\n\t\tthis.ready = true;\r\n\t\tn = parseInt(n);\r\n\r\n\t\t// update page\r\n\t\tthis.setState({page : parseInt(n)});\r\n\r\n\t\t// load data\r\n\t\t$.get(this.url.replace('{page}', ((n) ? n : 1)), function(res){\r\n\t\t\tres = JSON.parse(res);\r\n\t\t\tvar result = self.update(res.result);\r\n\t\t\tself.method = 'overwrite';\r\n\r\n\t\t\t// 다음 데이터가 없으면 더보기 버튼 숨기기\r\n\t\t\tif (!res.next)\r\n\t\t\t{\r\n\t\t\t\tself.setState({ showMoreButton : false })\r\n\t\t\t}\r\n\t\t\t// 돌아가는 more 버튼 멈추기\r\n\t\t\tself.refs.more.buttonControl(false);\r\n\t\t});\r\n\t},\r\n\r\n\t// update items\r\n\tupdate : function(newItems)\r\n\t{\r\n\t\tif (!newItems.length)\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar allItems = (this.method == 'add') ? this.state.items.concat(newItems) : newItems;\r\n\t\tthis.setState({items : allItems});\r\n\t\treturn true;\r\n\t},\r\n\r\n\t// render\r\n\trender : function()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<IndexItems items={this.state.items} />\r\n\t\t\t\t<IndexMore ref=\"more\" show={this.state.showMoreButton} dir=\"next\" />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/**\r\n * Component - index items\r\n */\r\nvar IndexItems = React.createClass({\r\n\trender : function()\r\n\t{\r\n\t\tvar items = function(item, k)\r\n\t\t{\r\n\t\t\treturn (<IndexItem key={k}>{item}</IndexItem>);\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<ul ref=\"list\">{this.props.items.map(items)}</ul>\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/**\r\n * Component - index item\r\n */\r\nvar IndexItem = React.createClass({\r\n\tonClick : function(e)\r\n\t{\r\n\t\treturn (comp.view.opened) ? false : true;\r\n\t},\r\n\trender : function()\r\n\t{\r\n\t\tvar item = this.props.children;\r\n\t\treturn (\r\n\t\t\t<li key={'item-' + item.srl}>\r\n\t\t\t\t<a href={'#/view/' + item.srl} onClick={this.onClick}>\r\n\t\t\t\t\t<ImageLoader src={item.img} alt={item.title} />\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/**\r\n * Component - index more data\r\n */\r\nvar IndexMore = React.createClass({\r\n\tgetInitialState : function()\r\n\t{\r\n\t\treturn {\r\n\t\t\tclass_button : ''\r\n\t\t};\r\n\t},\r\n\tmoreData : function(e)\r\n\t{\r\n\t\tthis.buttonControl(true);\r\n\t\tcomp.index.method = 'add';\r\n\t\tlocation.hash = '/page/' + ((this.props.dir == 'prev') ? comp.index.state.page - 1 : comp.index.state.page + 1);\r\n\t},\r\n\tbuttonControl : function(sw)\r\n\t{\r\n\t\tif (sw)\r\n\t\t{\r\n\t\t\tthis.setState({ class_button : 'rotate' });\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.setState({ class_button : '' });\r\n\t\t}\r\n\t},\r\n\trender : function()\r\n\t{\r\n\t\tvar button = null;\r\n\t\tif (this.props.show)\r\n\t\t{\r\n\t\t\tbutton = (\r\n\t\t\t\t<button type=\"button\" className={this.state.class_button} title=\"more load images\" key=\"more\" onClick={this.moreData}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t</button>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<nav className=\"more-data\">{button}</nav>\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/**\r\n * Image loader\r\n */\r\nvar ImageLoader = React.createClass({\r\n\r\n\tfigure : null,\r\n\timg : new Image(),\r\n\r\n\tgetInitialState : function()\r\n\t{\r\n\t\treturn {\r\n\t\t\tclass_loading : 'loading',\r\n\t\t\tclass_image : 'image',\r\n\t\t\tclass_error : 'error'\r\n\t\t};\r\n\t},\r\n\r\n\tcomponentDidMount : function()\r\n\t{\r\n\t\tvar self = this;\r\n\t\tvar img = new Image();\r\n\t\t// set figure\r\n\t\tthis.figure = ReactDOM.findDOMNode(this.refs.figure);\r\n\r\n\t\t// set image event\r\n\t\timg.onload = function()\r\n\t\t{\r\n\t\t\timg = null;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tself.setState({\r\n\t\t\t\t\tclass_loading : '',\r\n\t\t\t\t\tclass_image : 'image show'\r\n\t\t\t\t});\r\n\t\t\t}, 50);\r\n\r\n\t\t};\r\n\t\timg.onerror = function()\r\n\t\t{\r\n\t\t\timg = null;\r\n\t\t\tself.setState({\r\n\t\t\t\tclass_loading : '',\r\n\t\t\t\tclass_error : 'error show'\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// set image source\r\n\t\timg.src = this.props.src;\r\n\t},\r\n\r\n\trender : function()\r\n\t{\r\n\t\tvar dom = null;\r\n\t\tvar styleImage = {\r\n\t\t\tbackgroundImage : (this.props.src) ? 'url(' + this.props.src + ')' : ''\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<figure ref=\"figure\" title={this.props.title}>\r\n\t\t\t\t<span ref=\"image\" className={this.state.class_image} style={styleImage} />\r\n\t\t\t\t<span ref=\"error\" className={this.state.class_error} />\r\n\t\t\t\t<span ref=\"loading\" className={this.state.class_loading} />\r\n\t\t\t</figure>\r\n\t\t);\r\n\t}\r\n\r\n});\r\n\r\n\r\n/**\r\n * Component - View\r\n */\r\ncomps.View = React.createClass({\r\n\r\n\topened : false,\r\n\tscrollTop : 0,\r\n\r\n\tgetInitialState : function()\r\n\t{\r\n\t\treturn {\r\n\t\t\tparentClassName : '',\r\n\t\t\tsrl : null,\r\n\t\t\tslideSwitch : false,\r\n\t\t\tnavDirection : { prev : '', next : '' }\r\n\t\t};\r\n\t},\r\n\r\n\t// component did mount\r\n\tcomponentDidMount : function() {},\r\n\r\n\t// open view\r\n\topen : function(srl, isAnimation)\r\n\t{\r\n\t\tvar self = this;\r\n\t\tthis.opened = true;\r\n\t\tthis.scrollTop = document.body.scrollTop;\r\n\t\tif (isAnimation)\r\n\t\t{\r\n\t\t\tthis.setState({ parentClassName: 'show' }, function(){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tself.setState({ parentClassName: 'show animate' });\r\n\t\t\t\t}, 30);\r\n\t\t\t});\r\n\t\t\tcss3.transitionEnd(ReactDOM.findDOMNode(this.refs.wrap), function(e){\r\n\t\t\t\tself.action(e.target, srl);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tself.setState({ parentClassName: 'show animate' });\r\n\t\t\tself.action(ReactDOM.findDOMNode(this.refs.wrap), srl);\r\n\t\t}\r\n\r\n\t\t// add 'mode-popup' class name\r\n\t\t$('html').addClass('mode-popup');\r\n\t},\r\n\r\n\taction : function(o, srl)\r\n\t{\r\n\t\tthis.setState({ srl : srl });\r\n\t\tthis.refs.slider.open();\r\n\t\tthis.keyboardEvent(true);\r\n\t},\r\n\r\n\t// close view\r\n\tclose : function()\r\n\t{\r\n\t\tvar self = this;\r\n\r\n\t\tthis.opened = false;\r\n\t\tthis.setState({ parentClassName: 'show' });\r\n\r\n\t\tthis.keyboardEvent(false);\r\n\r\n\t\t// 닫기 애니메이션이 끝난 후\r\n\t\tcss3.transitionEnd(ReactDOM.findDOMNode(this.refs.wrap), function(e){\r\n\t\t\tif (self.refs.slider.swipeEvent)\r\n\t\t\t{\r\n\t\t\t\tself.refs.slider.swipeEvent.kill();\r\n\t\t\t\tself.refs.slider.swipeEvent = null;\r\n\t\t\t}\r\n\t\t\tself.setState({ parentClassName: '' });\r\n\t\t\tvar $items = $(ReactDOM.findDOMNode(self.refs.slider.refs.swipeWrap));\r\n\t\t\t$items.find('.show').removeClass('show');\r\n\r\n\t\t\t// close help\r\n\t\t\tif (self.refs.help.opened)\r\n\t\t\t{\r\n\t\t\t\tself.refs.help.close();\r\n\t\t\t}\r\n\r\n\t\t\t// restore scroll top\r\n\t\t\tdocument.body.scrollTop = self.scrollTop;\r\n\t\t});\r\n\r\n\t\tif (comp.index)\r\n\t\t{\r\n\t\t\tvar page = comp.index.state.page;\r\n\t\t\tvar cntItems = ReactDOM.findDOMNode(comp.index).getElementsByTagName('UL')[0].children.length;\r\n\t\t\tif (cntItems)\r\n\t\t\t{\r\n\t\t\t\trouter.oneStop(); // 주소가 변할때 목록이 불러와버리는 현상이 생겨서 한번만 실행되게 실행\r\n\t\t\t}\r\n\t\t\tlocation.hash = (page > 1) ? '#/page/' + page : '#/';\r\n\t\t}\r\n\r\n\t\t// remove 'mode-popup' class name\r\n\t\t$('html').removeClass('mode-popup');\r\n\t},\r\n\r\n\t// move item\r\n\tmove : function(e)\r\n\t{\r\n\t\tswitch(e.currentTarget.getAttribute('data-dir'))\r\n\t\t{\r\n\t\t\tcase 'prev':\r\n\t\t\t\tthis.refs.slider.prev();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'next':\r\n\t\t\t\tthis.refs.slider.next();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\t// 네비게이션 컨트롤 버튼 on/off 제어\r\n\tnavigationControl : function(obj)\r\n\t{\r\n\t\tthis.setState({\r\n\t\t\tnavDirection : {\r\n\t\t\t\tprev : (obj.prev) ? 'show' : '',\r\n\t\t\t\tnext : (obj.next) ? 'show' : ''\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t// 키보드 이벤트\r\n\tkeyboardEvent : function(sw)\r\n\t{\r\n\t\tvar self = this;\r\n\t\tif (sw)\r\n\t\t{\r\n\t\t\t$(window).on('keyup.view', function(e){\r\n\t\t\t\tif (e.keyCode == 37)\r\n\t\t\t\t{\r\n\t\t\t\t\t// left\r\n\t\t\t\t\tself.refs.slider.next();\r\n\t\t\t\t}\r\n\t\t\t\telse if (e.keyCode == 39)\r\n\t\t\t\t{\r\n\t\t\t\t\t// right\r\n\t\t\t\t\tself.refs.slider.prev();\r\n\t\t\t\t}\r\n\t\t\t\telse if (e.keyCode == 27)\r\n\t\t\t\t{\r\n\t\t\t\t\t// esc\r\n\t\t\t\t\tself.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$(window).off('keyup.view');\r\n\t\t}\r\n\t},\r\n\r\n\t// open help\r\n\topenHelp : function()\r\n\t{\r\n\t\tif (this.refs.help.opened)\r\n\t\t{\r\n\t\t\tthis.refs.help.close();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.refs.help.open();\r\n\t\t}\r\n\t},\r\n\r\n\t// render\r\n\trender : function()\r\n\t{\r\n\t\tvar controller;\r\n\t\tif (!util.touch())\r\n\t\t{\r\n\t\t\tcontroller = (\r\n\t\t\t\t<nav className=\"control-direction\">\r\n\t\t\t\t\t<button type=\"button\" onClick={this.move} data-dir=\"next\" title=\"next image\" className={'prev' + ' ' + this.state.navDirection.next}>\r\n\t\t\t\t\t\t<i className=\"sp-ico ico-arrow-left\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type=\"button\" onClick={this.move} data-dir=\"prev\" title=\"prev image\" className={'next' + ' ' + this.state.navDirection.prev}>\r\n\t\t\t\t\t\t<i className=\"sp-ico ico-arrow-right\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</nav>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<article ref=\"wrap\" className={'pop-view ' + this.state.parentClassName}>\r\n\t\t\t\t<Slider ref=\"slider\" srl={this.state.srl} json={this.props.json} navControl={this.navigationControl} />\r\n\t\t\t\t<nav className=\"control-top\">\r\n\t\t\t\t\t<button type=\"button\" ref=\"help\" title=\"help\" onClick={this.openHelp}>\r\n\t\t\t\t\t\t<i className=\"sp-ico ico-help\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type=\"button\" onClick={this.close} ref=\"close\" title=\"close\">\r\n\t\t\t\t\t\t<i className=\"btn-close\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</nav>\r\n\t\t\t\t{controller}\r\n\t\t\t\t<KeyboardHelp ref=\"help\" />\r\n\t\t\t</article>\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/**\r\n * Keyboard help\r\n */\r\nvar KeyboardHelp = React.createClass({\r\n\r\n\topened : false,\r\n\r\n\tgetInitialState : function()\r\n\t{\r\n\t\treturn {\r\n\t\t\tclassStr : ''\r\n\t\t};\r\n\t},\r\n\r\n\topen : function()\r\n\t{\r\n\t\tvar self = this;\r\n\t\tthis.opened = true;\r\n\t\t$(ReactDOM.findDOMNode(this)).show();\r\n\t\tsetTimeout(function(){\r\n\t\t\tself.setState({ classStr : 'show' });\r\n\t\t}, 30);\r\n\t},\r\n\r\n\tclose : function()\r\n\t{\r\n\t\tvar self = this;\r\n\t\tthis.opened = false;\r\n\t\tthis.setState({ classStr : '' });\r\n\t\tsetTimeout(function(){\r\n\t\t\t$(ReactDOM.findDOMNode(self)).hide();\r\n\t\t}, 280);\r\n\t},\r\n\r\n\trender : function()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<section className={'help ' + this.state.classStr}>\r\n\t\t\t\t<h1>Keyboard guide</h1>\r\n\t\t\t\t<div className=\"bd\">\r\n\t\t\t\t\t<dl>\r\n\t\t\t\t\t\t<dt><span>ESC</span></dt>\r\n\t\t\t\t\t\t<dd>Close view</dd>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t\t<dl>\r\n\t\t\t\t\t\t<dt><span>LEFT</span></dt>\r\n\t\t\t\t\t\t<dd>Prev Slide</dd>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t\t<dl>\r\n\t\t\t\t\t\t<dt><span>RIGHT</span></dt>\r\n\t\t\t\t\t\t<dd>Next Slide</dd>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button type=\"button\" className=\"close\" title=\"close\" onClick={this.close}><i>close</i></button>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n});\r\n\r\n/**\r\n * Slider\r\n */\r\nvar Slider = React.createClass({\r\n\r\n\tready : false,\r\n\tswipeEvent : null,\r\n\ttotal : 0,\r\n\r\n\tgetInitialState : function()\r\n\t{\r\n\t\treturn { data: [] };\r\n\t},\r\n\r\n\tcomponentDidMount : function()\r\n\t{\r\n\t\tvar self = this;\r\n\t\t$.get(this.props.json, function(res){\r\n\t\t\tvar getData = JSON.parse(res).result;\r\n\t\t\tself.total = getData.length;\r\n\t\t\tself.setState({data : getData});\r\n\t\t\tself.ready = true;\r\n\r\n\t\t\tvar item = self.refs['item-' + self.props.srl];\r\n\t\t\tvar $item = $(ReactDOM.findDOMNode(item));\r\n\r\n\t\t\t// view가 열려져 있는 상태라면 swipe 초기화하기\r\n\t\t\tif (comp.view.opened)\r\n\t\t\t{\r\n\t\t\t\tself.initSwipe($item);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tcheckNavigation : function()\r\n\t{\r\n\t\tvar pos = this.swipeEvent.getPos();\r\n\t\tvar param = { prev : true, next : true };\r\n\r\n\t\tif (pos == 0)\r\n\t\t{\r\n\t\t\tparam.prev = false;\r\n\t\t}\r\n\t\telse if ((this.total - 1) <= pos)\r\n\t\t{\r\n\t\t\tparam.next = false;\r\n\t\t}\r\n\r\n\t\tthis.props.navControl(param);\r\n\t},\r\n\r\n\tinitSwipe : function($el)\r\n\t{\r\n\t\tvar self = this;\r\n\t\tthis.swipeEvent = Swipe(ReactDOM.findDOMNode(this), {\r\n\t\t\tstartSlide : $el.index(),\r\n\t\t\tcontinuous : false,\r\n\t\t\tcallback : function(index, elem)\r\n\t\t\t{\r\n\t\t\t\tvar $item = $(elem).children('.img');\r\n\t\t\t\tif ($item.css('backgroundImage') == 'none')\r\n\t\t\t\t{\r\n\t\t\t\t\tself.imageLoad(elem.childNodes[0]);\r\n\t\t\t\t}\r\n\t\t\t\telse if (!$item.hasClass('show'))\r\n\t\t\t\t{\r\n\t\t\t\t\t$item.addClass('show');\r\n\t\t\t\t}\r\n\t\t\t\tself.changeUrl(parseInt(elem.getAttribute('data-srl')));\r\n\r\n\t\t\t\tself.checkNavigation();\r\n\t\t\t},\r\n\t\t\ttransitionEnd : function(index, elem) {}\r\n\t\t});\r\n\r\n\t\t// load image\r\n\t\tvar $child = $el.children('.img');\r\n\t\tif ($child.length)\r\n\t\t{\r\n\t\t\tthis.imageLoad($child.get(0));\r\n\t\t\tself.checkNavigation();\r\n\t\t}\r\n\t},\r\n\r\n\tgetItem : function(srl)\r\n\t{\r\n\t\treturn this.refs['item-' + srl];\r\n\t},\r\n\r\n\timageLoad : function(img)\r\n\t{\r\n\t\tvar src = img.getAttribute('data-src');\r\n\t\tvar tmp = new Image();\r\n\r\n\t\ttmp.onload = function()\r\n\t\t{\r\n\t\t\ttmp = null;\r\n\t\t\tvar $img = $(img);\r\n\t\t\tvar srl = parseInt($img.parent().attr('data-srl'));\r\n\t\t\t$img.parent().removeClass('loading');\r\n\t\t\t$img.css('background-image', 'url(\\'' + src + '\\')')\r\n\t\t\t\t.removeClass('not-animation')\r\n\t\t\t\t.addClass('show');\r\n\t\t\t$.get(phpScript + '?type=updateHit&srl=' + srl, function(res){ });\r\n\t\t};\r\n\r\n\t\ttmp.onerror = function()\r\n\t\t{\r\n\t\t\ttmp = null;\r\n\t\t};\r\n\r\n\t\ttmp.src = src;\r\n\t},\r\n\r\n\topen : function()\r\n\t{\r\n\t\tif (this.ready)\r\n\t\t{\r\n\t\t\tvar item = this.getItem(this.props.srl);\r\n\t\t\tvar $el = $(ReactDOM.findDOMNode(item));\r\n\t\t\t$el.children().removeClass('show').addClass('not-animation');\r\n\t\t\tthis.initSwipe($el);\r\n\t\t}\r\n\t},\r\n\r\n\tprev : function()\r\n\t{\r\n\t\tthis.swipeEvent.prev();\r\n\t},\r\n\r\n\tnext : function()\r\n\t{\r\n\t\tthis.swipeEvent.next();\r\n\t},\r\n\r\n\tchangeUrl : function(srl)\r\n\t{\r\n\t\trouter.oneStop();\r\n\t\tlocation.hash = '/view/' + srl;\r\n\t},\r\n\r\n\trender : function()\r\n\t{\r\n\t\tvar items = this.state.data.map(function(o, k){\r\n\t\t\treturn (\r\n\t\t\t\t<div ref={'item-' + o.srl} data-srl={o.srl} key={'srl-' + o.srl} className=\"loading\">\r\n\t\t\t\t\t<div data-src={o.img} title={o.title} className=\"img\" />\r\n\t\t\t\t\t<span className=\"log\">{'index:' + k + ', srl:' + o.srl}</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<div ref=\"slider\" className='swipe'>\r\n\t\t\t\t<div ref=\"swipeWrap\" className='swipe-wrap'>\r\n\t\t\t\t\t{items}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n});\r\n\r\n\r\nmodule.exports = comps;"],"sourceRoot":"/source/"}